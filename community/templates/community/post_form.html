{% extends 'base.html' %}
{% load static %}

{% block title %}{% if is_create %}إنشاء منشور جديد{% else %}تعديل المنشور{% endif %} | مجتمع التعافي{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto bg-surface rounded-3xl shadow-2xl p-6 md:p-8 my-8 animate-fade-in-up">
    <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-8" style="color: var(--color-text-primary);">
        {% if is_create %}
            <i class="fas fa-plus-circle text-primary-dark mr-3"></i> إنشاء منشور جديد
        {% else %}
            <i class="fas fa-edit text-blue-600 mr-3"></i> تعديل المنشور
        {% endif %}
    </h1>

    <p class="text-lg text-center text-gray-700 mb-10">
        {% if is_create %}
            اكتب أفكارك وتجاربك هنا لمشاركتها مع مجتمع التعافي. يمكنك استخدام تنسيق <a href="https://www.markdownguide.org/basic-syntax/" target="_blank" class="text-blue-500 hover:underline">Markdown</a>.
        {% else %}
            قم بتعديل منشورك الحالي ليعكس أحدث أفكارك. يمكنك استخدام تنسيق <a href="https://www.markdownguide.org/basic-syntax/" target="_blank" class="text-blue-500 hover:underline">Markdown</a>.
        {% endif %}
    </p>

    <form method="post" class="space-y-6">
        {% csrf_token %}

        <div>
            <label for="{{ form.title.id_for_label }}" class="block text-lg font-semibold text-gray-700 mb-2">العنوان</label>
            {{ form.title }}
            {% if form.title.errors %}
                <p class="text-red-500 text-sm mt-1">{{ form.title.errors|join:", " }}</p>
            {% endif %}
        </div>

        <div>
            <label for="{{ form.content.id_for_label }}" class="block text-lg font-semibold text-gray-700 mb-2">المحتوى</label>
            {{ form.content }}
            {% if form.content.errors %}
                <p class="text-red-500 text-sm mt-1">{{ form.content.errors|join:", " }}</p>
            {% endif %}
        </div>

        <div class="text-center mt-8">
            <button type="submit" class="inline-flex items-center justify-center
                           bg-primary text-white font-bold py-3 px-8 rounded-full shadow-md
                           hover:bg-primary-dark hover:scale-105 transition duration-300 ease-in-out
                           focus:outline-none focus:ring-4 focus:ring-primary-light focus:ring-opacity-75">
                {% if is_create %}
                    <i class="fas fa-paper-plane mr-2 rtl:mr-0 rtl:ml-2"></i> نشر المنشور
                {% else %}
                    <i class="fas fa-save mr-2 rtl:mr-0 rtl:ml-2"></i> حفظ التعديلات
                {% endif %}
            </button>
            <a href="{% url 'community:post_list' %}" class="inline-flex items-center justify-center
                       bg-gray-200 text-gray-800 font-bold py-3 px-8 rounded-full shadow-md ml-4 rtl:ml-0 rtl:mr-4
                       hover:bg-gray-300 hover:scale-105 transition duration-300 ease-in-out
                       focus:outline-none focus:ring-4 focus:ring-gray-400 focus:ring-opacity-75">
                <i class="fas fa-arrow-left mr-2 rtl:mr-0 rtl:ml-2"></i> إلغاء
            </a>
        </div>
    </form>
</div>
{% endblock %}
